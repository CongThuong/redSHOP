!function(e){e(document).ready(function(){function t(t){try{SqueezeBox.initialize(),SqueezeBox.assign($$("a.modal-thumb"),{parse:"rel"}),""!=t&&e(t).chosen({disable_search_threshold:10,allow_single_deselect:!0})}catch(e){}}function a(e,t,a,i){return'<input type="hidden" value="0" name="'+e+'[count_subprop]" class="count_subprop" /><input type="hidden" value="'+a+'" name="'+e+'[key_prop]" class="key_prop" /><a class="btn btn-success add_property btn-small">+ '+Joomla.JText._("COM_REDSHOP_ADD_SUB_ATTRIBUTE")+'</a><a href="#" class="showhidearrow">'+Joomla.JText._("COM_REDSHOP_SUB_ATTRIBUTE")+'<img class="arrowimg" src="media/com_redshop/images/arrow.png" alt=""/></a><div class="attr_tbody form-inline divInspectFromHideShow"><div class="row"><div class="col-sm-4"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_SUB_ATTRIBUTE")+'</label><input type="text" class="input-small" name="'+e+'[name]" value=""><input type="hidden"  name="attribute['+t+"][property]["+a+'][mainImage]" value="" id="propmainImage'+t+a+'"><input type="hidden" name="attribute['+t+"][property]["+a+'][property_image]" id="propertyImageName'+t+a+'" /></div></div><div class="col-sm-4"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_PRICE")+'</label><input type="text" class="text-center input-xmini" value="+" name="'+e+'[oprand]" onchange="javascript:oprand_check(this);"> <input type="text" class="input-mini" value="" name="'+e+'[price]"></div></div></div><div class="row"><div class="col-sm-4"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_PROPERTY_NUMBER")+'</label><input type="text" name="'+e+'[number]" value="" class="vpnrequired input-mini"></div></div><div class="col-sm-4"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_ATTRIBUTE_EXTRAFIELD")+'</label><input type="text" class="input-mini" name="'+e+'[extra_field]" value="" /></div></div><div class="col-sm-4"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_ORDERING")+'</label><input type="text" class="text-center input-xmini" name="'+e+'[order]" value="'+i+'"></div></div></div><div class="row"><div class="col-sm-4"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_DEFAULT_SELECTED")+'</label><input type="checkbox" value="1" name="'+e+'[default_sel]" /></div></div></div><div class="row"><div class="col-sm-4"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_PUBLISHED")+'</label><input type="checkbox" name="'+e+'[published]" checked="checked" value="1" /></div></div><div class="col-sm-8"><input value="'+Joomla.JText._("COM_REDSHOP_DELETE")+'" class="btn btn-danger delete_property btn-small" type="button" /><a class="btn btn-success add_subproperty btn-small" href="#">+ '+Joomla.JText._("COM_REDSHOP_NEW_SUB_PROPERTY")+'</a></div></div><div class="attribute_parameter_tr divFromHideShow"><div class="row showsubproperty"><div class="col-sm-6"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_TITLE")+'</label><input class="input-small" type="text" name="'+e+'[subproperty][title]" value=""></div><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_SUBATTRIBUTE_REQUIRED")+'</label><input type="checkbox" value="1" name="'+e+'[req_sub_att]" /></div></div><div class="col-sm-6"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_DISPLAY_ATTRIBUTE_TYPE")+'</label><select id="attribute_'+t+"_property_"+a+'_setdisplay_type" name="'+e+'[setdisplay_type]" class="input-medium"><option value="dropdown" selected="selected" >'+Joomla.JText._("COM_REDSHOP_DROPDOWN_LIST")+'</option><option value="radio" >'+Joomla.JText._("COM_REDSHOP_RADIOBOX")+'</option></select></div><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_SUBATTRIBUTE_MULTISELECTED")+'</label><input type="checkbox" value="1" name="attribute[+gh+][property]['+a+'][multi_sub_att]" /></div></div></div><div class="sub_attribute_table"></div></div></div>'}e(".add_attribute").on("click",function(i){i.preventDefault();var l=e(".count_attr"),o=parseInt(l.val());l.val(o+1);var s="attribute["+o+"]";e(".mainTableAttributes").append('<div class="attribute_table divInspectFromHideShow"><input type="hidden" name="'+s+'[count_prop]" class="count_prop" value="1" /><input type="hidden" value="'+o+'" name="'+s+'[key_attr]" class="key_attr" /><a href="#" class="showhidearrow">'+Joomla.JText._("COM_REDSHOP_TITLE")+'<img class="arrowimg" src="media/com_redshop/images/arrow.png" alt=""/></a><div class="col-sm-12 oneAttribute"><div class="rowAttribute"><div class="col-sm-5"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_ATTRIBUTE_NAME")+'</label><input type="text" class="input-small" name="'+s+'[name]" value="" /></div><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_DISPLAY_ATTRIBUTE_TYPE")+'</label><select id="attribute_'+o+'_display_type" name="'+s+'[display_type]" class="input-medium"> <option value="dropdown" selected="selected">'+Joomla.JText._("COM_REDSHOP_DROPDOWN_LIST")+'</option><option value="radio">'+Joomla.JText._("COM_REDSHOP_RADIOBOX")+'</option></select></div><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_DESCRIPTION")+'</label><input class="text-center input-small" type="text" name="'+s+'[attribute_description]" value="" /></div></div><div class="col-sm-3"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_ORDERING")+'</label><input class="text-center input-xmini" type="text" name="'+s+'[ordering]" value="'+(o+1)+'" /></div></div><div class="col-sm-4"><div class="form-group"><input type="checkbox" name="'+s+'[required]" value="1" /><label class="checkbox inline">'+Joomla.JText._("COM_REDSHOP_ATTRIBUTE_REQUIRED")+'</label></div><div class="form-group"><input type="checkbox" value="1" name="'+s+'[allow_multiple_selection]" /><label class="checkbox inline">'+Joomla.JText._("COM_REDSHOP_ALLOW_MULTIPLE_PROPERTY_SELECTION")+'</label></div><div class="form-group"><input type="checkbox" value="1"  name="'+s+'[hide_attribute_price]" /><label class="checkbox inline">'+Joomla.JText._("COM_REDSHOP_HIDE_ATTRIBUTE_PRICE")+'</label></div><div class="form-group"><input type="checkbox" checked="checked" name="'+s+'[published]" value="1" /><label class="checkbox inline">'+Joomla.JText._("COM_REDSHOP_PUBLISHED")+'</label></div></div></div></div><div class="property_table">'+a(s+"[property][0]",o,0,1)+"</div></div>"),t("#attribute_"+o+"_display_type, #attribute_"+o+"_property_0_setdisplay_type")}),e("#mainTableAttributes").on("click",".delete_subproperty",function(){if(confirm(Joomla.JText._("COM_REDSHOP_WARNING_TO_DELETE"))){var t=e(this);if(t.attr("id")){var a=t.attr("id").split("_");e.ajax({url:"index.php?option=com_redshop&view=product_detail&task=delete_subprop&tmpl=component&sp_id="+a[1]+"&subattribute_id="+a[2],type:"POST"})}1==t.closest(".attribute_parameter_tr").find(".sub_attribute_table").size()&&t.closest(".attribute_parameter_tr").find(".showsubproperty").css({display:"none"}),t.closest(".sub_attribute_table").remove()}}).on("click",".deletePropertyMainImage",function(){if(confirm(Joomla.JText._("COM_REDSHOP_DO_WANT_TO_DELETE"))){var t=e(this);if(t.attr("id")){var a=t.attr("id").split("_");e.ajax({url:"index.php?tmpl=component&option=com_redshop&view=product_detail&task=removepropertyImage&pid="+a[1],type:"POST"}),e("#propertyImageName"+a[2]).val(""),e("#propertyImage"+a[2]).css({display:"none"}),t.remove()}}}).on("click",".deleteSubPropertyMainImage",function(){if(confirm(Joomla.JText._("COM_REDSHOP_DO_WANT_TO_DELETE"))){var t=e(this);if(t.attr("id")){var a=t.attr("id").split("_");e.ajax({url:"index.php?tmpl=component&option=com_redshop&view=product_detail&task=removesubpropertyImage&pid="+a[1],type:"POST"}),e("#subPropertyImageName"+a[2]).val(""),e("#subpropertyImage"+a[2]).css({display:"none"}),t.remove()}}}).on("click",".delete_property",function(){if(confirm(Joomla.JText._("COM_REDSHOP_WARNING_TO_DELETE"))){var t=e(this);if(t.attr("id")){var a=t.attr("id").split("_");e.ajax({url:"index.php?option=com_redshop&view=product_detail&task=delete_prop&tmpl=component&attribute_id="+a[2]+"&property_id="+a[1],type:"POST"})}t.closest(".attr_tbody").remove()}}).on("click",".delete_attribute",function(){if(confirm(Joomla.JText._("COM_REDSHOP_WARNING_TO_DELETE"))){var t=e(this);if(t.attr("id")){var a=t.attr("id").split("_");e.ajax({url:"index.php?option=com_redshop&view=product_detail&task=delete_attibute&tmpl=component&attribute_id="+a[1]+"&product_id="+a[2]+"&attribute_set_id="+a[3],type:"POST"})}t.closest(".attribute_table").remove()}}).on("click",".add_property",function(i){i.preventDefault();var l=e(this),o=parseInt(l.closest(".attribute_table").find(".key_attr").val()),s=l.closest(".attribute_table").find(".count_prop"),r=parseInt(s.val());s.val(r+1);var p=r+1,n="attribute["+o+"][property]["+r+"]";l.closest(".attribute_table").find(".property_table").append(a(n,o,r,p)),t("#attribute_"+o+"_property_"+r+"_setdisplay_type")}).on("click",".add_subproperty",function(a){a.preventDefault();var i=e(this);i.parents(".attr_tbody").find(".showsubproperty").css({display:"block"}),i.parents(".attr_tbody").find(".attribute_parameter_tr").css({display:"block"});var l=parseInt(i.parents(".attribute_table").find(".key_attr").val()),o=parseInt(i.parents(".attr_tbody").find(".key_prop").val()),s=i.parents(".attr_tbody").find(".count_subprop"),r=parseInt(s.val());s.val(r+1);var p=r+1,n="attribute["+l+"][property]["+o+"][subproperty]["+r+"]";i.parents(".attr_tbody").find(".sub_attribute_table").append('<div class="sub_property_table"><div class="row"><div class="col-sm-2"><label>'+Joomla.JText._("COM_REDSHOP_PARAMETER")+'</label><input type="text" name="'+n+'[name]"  class="input-small"><input type="hidden" name="'+n+'[mainImage]" id="subpropmainImage'+l+r+'" /><input type="hidden" name="'+n+'[image]" id="subPropertyImageName'+l+r+'" /></div><div class="col-sm-2"><label>'+Joomla.JText._("COM_REDSHOP_PRICE")+'</label><input type="text" onchange="javascript:oprand_check(this);" name="'+n+'[oprand]" value="+" class="input-xmini text-center"><input type="text" name="'+n+'[price]" class="input-mini"></div><div class="col-sm-1"><label>'+Joomla.JText._("COM_REDSHOP_PROPERTY_NUMBER")+'</label><input type="text" name="'+n+'[number]" value="" class="vpnrequired input-mini"></div><div class="col-sm-1"><label>'+Joomla.JText._("COM_REDSHOP_ATTRIBUTE_EXTRAFIELD")+'</label><input type="text" name="'+n+'[extra_field]" class="input-mini"></div><div class="col-sm-3"><label>'+Joomla.JText._("COM_REDSHOP_ORDERING")+'</label><input type="text" value="'+p+'" name="'+n+'[order]" class="text-center input-xmini"></div><div class="col-sm-1"><label>'+Joomla.JText._("COM_REDSHOP_PUBLISHED")+'</label><input type="checkbox" value="1" checked="checked" name="'+n+'[published]"></div><div class="col-sm-1"><label>'+Joomla.JText._("COM_REDSHOP_DEFAULT_SELECTED")+'</label><input type="checkbox" value="1" name="'+n+'[chk_propdselected]"></div><div class="col-sm-1"><input value="'+Joomla.JText._("COM_REDSHOP_DELETE")+'" class="btn btn-danger delete_subproperty btn-small" type="button" /></div></div></div>'),t("")}).on("click",".showhidearrow",function(t){t.preventDefault();var a=e(this).closest(".divInspectFromHideShow").find(".divFromHideShow");"none"==a.css("display")?(a.show(200),e(this).find("img").attr("src","media/com_redshop/images/arrow.png")):(a.hide(200),e(this).find("img").attr("src","media/com_redshop/images/arrow_d.png"))}),e("dd.tabs:visible").on("click",'.checkbox.inline[name*="[preselected]"] input',function(){return 1==e(this).parents(".attribute_table").find('.checkbox.inline input[name*="[allow_multiple_selection]"]').is(":checked")||(e(this).parents(".attribute_table").find('.checkbox.inline[name*="[preselected]"] input:checked').length>1?(alert(Joomla.JText._("COM_REDSHOP_ALERT_PRESELECTED_CHECK")),!1):void 0)}).on("click",'.checkbox.inline input[name*="[allow_multiple_selection]"]',function(){0==e(this).is(":checked")&&e(this).parents(".attribute_table").find('.checkbox.inline[name*="[preselected]"] input').each(function(t,a){e(a).prop("checked",!1)})})})}(jQuery);